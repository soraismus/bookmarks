[Flippin' Awesome](http://flippinawesome.org/ "Flippin' Awesome")
=================================================================

[15 Must read articles **](#)

April 15, 2014

-   [![Prepocessor\_Architecture\_header](http://flippinawesome.org/wp-content/uploads/2014/04/Prepocessor_Architecture_header-110x110.jpg)](http://flippinawesome.org/2014/04/14/organizing-your-css-code-for-preprocessors/ "Organizing Your CSS Code for Preprocessors")
    [Organizing Your CSS Code for
    Preprocessors](http://flippinawesome.org/2014/04/14/organizing-your-css-code-for-preprocessors/ "Organizing Your CSS Code for Preprocessors")
-   [![es6\_header](http://flippinawesome.org/wp-content/uploads/2014/04/es6_header-110x110.jpg)](http://flippinawesome.org/2014/04/14/ecmascript-6-jump-in-the-water-is-warm/ "ECMAScript 6: Jump in, the water is warm!")
    [ECMAScript 6: Jump in, the water is
    warm!](http://flippinawesome.org/2014/04/14/ecmascript-6-jump-in-the-water-is-warm/ "ECMAScript 6: Jump in, the water is warm!")
-   [![engaging\_games\_header](http://flippinawesome.org/wp-content/uploads/2014/04/engaging_games_header-110x110.jpg)](http://flippinawesome.org/2014/04/14/ten-engagement-strategies-to-increase-the-profitability-of-your-mobile-game/ "Ten Engagement Strategies to Increase the Profitability of Your Mobile Game")
    [Ten Engagement Strategies to Increase the Profitability of Your
    Mobile
    Game](http://flippinawesome.org/2014/04/14/ten-engagement-strategies-to-increase-the-profitability-of-your-mobile-game/ "Ten Engagement Strategies to Increase the Profitability of Your Mobile Game")
-   [![oculus\_header](http://flippinawesome.org/wp-content/uploads/2014/04/oculus_header-110x110.jpg)](http://flippinawesome.org/2014/04/14/will-oculus-vr-and-amazon-fire-tv-change-web-app-development/ "Will Oculus VR and Amazon Fire TV Change Web App Development?")
    [Will Oculus VR and Amazon Fire TV Change Web App
    Development?](http://flippinawesome.org/2014/04/14/will-oculus-vr-and-amazon-fire-tv-change-web-app-development/ "Will Oculus VR and Amazon Fire TV Change Web App Development?")
-   [](http://flippinawesome.org/2014/04/10/web-standards-library-update-week-of-march-31-2014/ "Web Standards Library Update – Week of March 31, 2014")
    [Web Standards Library Update – Week of March 31,
    2014](http://flippinawesome.org/2014/04/10/web-standards-library-update-week-of-march-31-2014/ "Web Standards Library Update – Week of March 31, 2014")
-   [](http://flippinawesome.org/2014/04/09/best-of-javascript-html-css-march-31-2014/ "Best of JavaScript, HTML & CSS – Week of March 31, 2014")
    [Best of JavaScript, HTML & CSS – Week of March 31,
    2014](http://flippinawesome.org/2014/04/09/best-of-javascript-html-css-march-31-2014/ "Best of JavaScript, HTML & CSS – Week of March 31, 2014")
-   [![browser\_detection\_header](http://flippinawesome.org/wp-content/uploads/2014/04/browser_detection_header-110x110.jpg)](http://flippinawesome.org/2014/04/07/improving-browser-detection/ "Improving Browser Detection")
    [Improving Browser
    Detection](http://flippinawesome.org/2014/04/07/improving-browser-detection/ "Improving Browser Detection")
-   [![html5\_games\_engine\_header](http://flippinawesome.org/wp-content/uploads/2014/04/html5_games_engine_header-110x110.jpg)](http://flippinawesome.org/2014/04/07/lessons-learned-building-an-html5-games-engine/ "Lessons Learned Building an HTML5 Games Engine")
    [Lessons Learned Building an HTML5 Games
    Engine](http://flippinawesome.org/2014/04/07/lessons-learned-building-an-html5-games-engine/ "Lessons Learned Building an HTML5 Games Engine")
-   [![express\_routes\_header](http://flippinawesome.org/wp-content/uploads/2014/04/express_routes_header-110x110.jpg)](http://flippinawesome.org/2014/04/07/the-basics-of-express-routes/ "The Basics of Express Routes")
    [The Basics of Express
    Routes](http://flippinawesome.org/2014/04/07/the-basics-of-express-routes/ "The Basics of Express Routes")
-   [](http://flippinawesome.org/2014/04/03/web-standards-library-update-week-of-march-24-2014/ "Web Standards Library Update – Week of March 24, 2014")
    [Web Standards Library Update – Week of March 24,
    2014](http://flippinawesome.org/2014/04/03/web-standards-library-update-week-of-march-24-2014/ "Web Standards Library Update – Week of March 24, 2014")
-   [](http://flippinawesome.org/2014/04/02/best-of-javascript-html-css-week-of-march-24-2014/ "Best of JavaScript, HTML & CSS – Week of March 24, 2014")
    [Best of JavaScript, HTML & CSS – Week of March 24,
    2014](http://flippinawesome.org/2014/04/02/best-of-javascript-html-css-week-of-march-24-2014/ "Best of JavaScript, HTML & CSS – Week of March 24, 2014")
-   [![choice\_header](http://flippinawesome.org/wp-content/uploads/2014/03/choice_header-110x110.jpg)](http://flippinawesome.org/2014/03/31/paralyzed-by-choice-in-front-end-development/ "Paralyzed by Choice in Front-end Development")
    [Paralyzed by Choice in Front-end
    Development](http://flippinawesome.org/2014/03/31/paralyzed-by-choice-in-front-end-development/ "Paralyzed by Choice in Front-end Development")
-   [![npm\_header](http://flippinawesome.org/wp-content/uploads/2014/03/npm_header-110x110.jpg)](http://flippinawesome.org/2014/03/31/introduction-to-npm/ "Introduction to npm")
    [Introduction to
    npm](http://flippinawesome.org/2014/03/31/introduction-to-npm/ "Introduction to npm")
-   [![oscillators\_header](http://flippinawesome.org/wp-content/uploads/2014/03/oscillators_header-110x110.jpg)](http://flippinawesome.org/2014/03/31/creating-sound-with-the-web-audio-api-and-oscillators/ "Creating Sound with the Web Audio API and Oscillators")
    [Creating Sound with the Web Audio API and
    Oscillators](http://flippinawesome.org/2014/03/31/creating-sound-with-the-web-audio-api-and-oscillators/ "Creating Sound with the Web Audio API and Oscillators")
-   [](http://flippinawesome.org/2014/03/26/web-standards-library-update-week-of-march-17-2014/ "Web Standards Library Update – Week of March 17, 2014")
    [Web Standards Library Update – Week of March 17,
    2014](http://flippinawesome.org/2014/03/26/web-standards-library-update-week-of-march-17-2014/ "Web Standards Library Update – Week of March 17, 2014")

** [DW Focus](http://flippinawesome.org/ "DW Focus")

-   [**](https://www.facebook.com/flippin.awesome.dev "Facebook")
-   [**](http://twitter.com/remotesynth "Twitter")
-   [**](http://feeds.feedburner.com/FlippinAwesome "Rss")
-   [**](http://flippinawesome.org/wp-login.php?redirect_to=http%3A%2F%2Fflippinawesome.org%2F2013%2F09%2F30%2Ffunctional-reactive-programming-in-javascript%2F "Login")

-   [About](http://flippinawesome.org/about/)**
    -   [Authors](http://flippinawesome.org/authors/)
    -   [Write for Us](http://flippinawesome.org/write-for-us/)

-   [Mailing List](http://flippinawesome.org/mailing-list/)
-   [Podcast](/topic-undefined/)**
    -   [Latest
        Episode](http://flippinawesome.org/topic-undefined/topic-undefined-episode-7/)

-   [Web Development](http://flippinawesome.org/category/web/)
    **
    -   [JavaScript](http://flippinawesome.org/category/web/javascript/)
    -   [CSS](http://flippinawesome.org/category/web/css/)
    -   [HTML](http://flippinawesome.org/category/web/html/)

    -   [![es6\_header](http://flippinawesome.org/wp-content/uploads/2014/04/es6_header-110x110.jpg)](http://flippinawesome.org/2014/04/14/ecmascript-6-jump-in-the-water-is-warm/ "ECMAScript 6: Jump in, the water is warm!")
        [ECMAScript 6: Jump in, the water is
        warm!](http://flippinawesome.org/2014/04/14/ecmascript-6-jump-in-the-water-is-warm/ "ECMAScript 6: Jump in, the water is warm!")
        - 2 days ago
    -   [![browser\_detection\_header](http://flippinawesome.org/wp-content/uploads/2014/04/browser_detection_header-110x110.jpg)](http://flippinawesome.org/2014/04/07/improving-browser-detection/ "Improving Browser Detection")
        [Improving Browser
        Detection](http://flippinawesome.org/2014/04/07/improving-browser-detection/ "Improving Browser Detection")
        - 1 week ago
    -   [![npm\_header](http://flippinawesome.org/wp-content/uploads/2014/03/npm_header-110x110.jpg)](http://flippinawesome.org/2014/03/31/introduction-to-npm/ "Introduction to npm")
        [Introduction to
        npm](http://flippinawesome.org/2014/03/31/introduction-to-npm/ "Introduction to npm")
        - 2 weeks ago
    -   [![oscillators\_header](http://flippinawesome.org/wp-content/uploads/2014/03/oscillators_header-110x110.jpg)](http://flippinawesome.org/2014/03/31/creating-sound-with-the-web-audio-api-and-oscillators/ "Creating Sound with the Web Audio API and Oscillators")
        [Creating Sound with the Web Audio API and
        Oscillators](http://flippinawesome.org/2014/03/31/creating-sound-with-the-web-audio-api-and-oscillators/ "Creating Sound with the Web Audio API and Oscillators")
        - 2 weeks ago
    -   [![string\_harmful](http://flippinawesome.org/wp-content/uploads/2014/03/string_harmful-110x110.jpg)](http://flippinawesome.org/2014/03/24/string-templating-considered-harmful/ "String Templating Considered Harmful")
        [String Templating Considered
        Harmful](http://flippinawesome.org/2014/03/24/string-templating-considered-harmful/ "String Templating Considered Harmful")
        - 3 weeks ago

    [View all](http://flippinawesome.org/category/web/javascript/)
    -   [![Prepocessor\_Architecture\_header](http://flippinawesome.org/wp-content/uploads/2014/04/Prepocessor_Architecture_header-110x110.jpg)](http://flippinawesome.org/2014/04/14/organizing-your-css-code-for-preprocessors/ "Organizing Your CSS Code for Preprocessors")
        [Organizing Your CSS Code for
        Preprocessors](http://flippinawesome.org/2014/04/14/organizing-your-css-code-for-preprocessors/ "Organizing Your CSS Code for Preprocessors")
        - 2 days ago
    -   [![sass\_each\_header](http://flippinawesome.org/wp-content/uploads/2014/03/sass_each_header-110x110.jpg)](http://flippinawesome.org/2014/03/17/doing-more-with-sass-each-control-directive/ "Doing More with Sass’ @each Control Directive")
        [Doing More with Sass’ @each Control
        Directive](http://flippinawesome.org/2014/03/17/doing-more-with-sass-each-control-directive/ "Doing More with Sass’ @each Control Directive")
        - 4 weeks ago
    -   [![react\_grunt\_header](http://flippinawesome.org/wp-content/uploads/2014/03/react_grunt_header-110x110.jpg)](http://flippinawesome.org/2014/03/17/creating-modular-view-components-with-react-and-grunt/ "Creating Modular View Components with React and Grunt")
        [Creating Modular View Components with React and
        Grunt](http://flippinawesome.org/2014/03/17/creating-modular-view-components-with-react-and-grunt/ "Creating Modular View Components with React and Grunt")
        - 4 weeks ago
    -   [![sass\_control\_header](http://flippinawesome.org/wp-content/uploads/2014/02/sass_control_header-110x110.jpg)](http://flippinawesome.org/2014/03/03/getting-into-sass-control-directives/ "Getting into Sass Control Directives")
        [Getting into Sass Control
        Directives](http://flippinawesome.org/2014/03/03/getting-into-sass-control-directives/ "Getting into Sass Control Directives")
        - 1 month ago
    -   [![css\_grid\_header](http://flippinawesome.org/wp-content/uploads/2014/02/css_grid_header-110x110.jpg)](http://flippinawesome.org/2014/03/03/grids-in-css3/ "Grids in CSS3")
        [Grids in
        CSS3](http://flippinawesome.org/2014/03/03/grids-in-css3/ "Grids in CSS3")
        - 1 month ago

    [View all](http://flippinawesome.org/category/web/css/)
    -   [![browser\_detection\_header](http://flippinawesome.org/wp-content/uploads/2014/04/browser_detection_header-110x110.jpg)](http://flippinawesome.org/2014/04/07/improving-browser-detection/ "Improving Browser Detection")
        [Improving Browser
        Detection](http://flippinawesome.org/2014/04/07/improving-browser-detection/ "Improving Browser Detection")
        - 1 week ago
    -   [![string\_harmful](http://flippinawesome.org/wp-content/uploads/2014/03/string_harmful-110x110.jpg)](http://flippinawesome.org/2014/03/24/string-templating-considered-harmful/ "String Templating Considered Harmful")
        [String Templating Considered
        Harmful](http://flippinawesome.org/2014/03/24/string-templating-considered-harmful/ "String Templating Considered Harmful")
        - 3 weeks ago
    -   [![dom\_access\_header](http://flippinawesome.org/wp-content/uploads/2014/03/dom_access_header-110x110.jpg)](http://flippinawesome.org/2014/03/10/a-dom-manipulation-class-in-100-lines-of-javascript/ "A DOM Manipulation Class in 100 Lines of JavaScript")
        [A DOM Manipulation Class in 100 Lines of
        JavaScript](http://flippinawesome.org/2014/03/10/a-dom-manipulation-class-in-100-lines-of-javascript/ "A DOM Manipulation Class in 100 Lines of JavaScript")
        - 1 month ago
    -   [![svg\_header](http://flippinawesome.org/wp-content/uploads/2014/02/svg_header-110x110.jpg)](http://flippinawesome.org/2014/02/03/learning-svg/ "Learning SVG")
        [Learning
        SVG](http://flippinawesome.org/2014/02/03/learning-svg/ "Learning SVG")
        - 2 months ago
    -   [![abbr\_header](http://flippinawesome.org/wp-content/uploads/2014/01/abbr_header-110x110.jpg)](http://flippinawesome.org/2014/01/13/enhancing-the-html-abbr-element-on-mobile/ "Enhancing the HTML abbr Element on Mobile")
        [Enhancing the HTML abbr Element on
        Mobile](http://flippinawesome.org/2014/01/13/enhancing-the-html-abbr-element-on-mobile/ "Enhancing the HTML abbr Element on Mobile")
        - 3 months ago

    [View all](http://flippinawesome.org/category/web/html/)
-   [Mobile Development](http://flippinawesome.org/category/mobile/)
    **
    -   [PhoneGap](http://flippinawesome.org/category/mobile/phonegap/)

    -   [![parallax\_mobile\_header](http://flippinawesome.org/wp-content/uploads/2013/12/parallax_mobile_header-110x110.jpg)](http://flippinawesome.org/2013/12/23/parallax-ui-for-phonegap-and-mobile-web-apps/ "Parallax UI for PhoneGap and Mobile Web Apps")
        [Parallax UI for PhoneGap and Mobile Web
        Apps](http://flippinawesome.org/2013/12/23/parallax-ui-for-phonegap-and-mobile-web-apps/ "Parallax UI for PhoneGap and Mobile Web Apps")
        - 4 months ago
    -   [![mapping\_phonegap\_header](http://flippinawesome.org/wp-content/uploads/2013/12/mapping_phonegap_header1-110x110.jpg)](http://flippinawesome.org/2013/12/09/mobile-friendly-mapping-for-phonegap-apps/ "Mobile-Friendly Mapping for PhoneGap Apps")
        [Mobile-Friendly Mapping for PhoneGap
        Apps](http://flippinawesome.org/2013/12/09/mobile-friendly-mapping-for-phonegap-apps/ "Mobile-Friendly Mapping for PhoneGap Apps")
        - 4 months ago
    -   [](http://flippinawesome.org/2013/04/29/phonegap-build-step-7/ "Create Your First Mobile App with PhoneGap Build – Using the Notification API")
        [Create Your First Mobile App with PhoneGap Build – Using the
        Notification
        API](http://flippinawesome.org/2013/04/29/phonegap-build-step-7/ "Create Your First Mobile App with PhoneGap Build – Using the Notification API")
        - 12 months ago
    -   [](http://flippinawesome.org/2013/04/22/phonegap-build-step-6/ "Create Your First Mobile App with PhoneGap Build – Using the Storage API")
        [Create Your First Mobile App with PhoneGap Build – Using the
        Storage
        API](http://flippinawesome.org/2013/04/22/phonegap-build-step-6/ "Create Your First Mobile App with PhoneGap Build – Using the Storage API")
        - 12 months ago
    -   [](http://flippinawesome.org/2013/04/15/phonegap-build-step-5/ "Create Your First Mobile App with PhoneGap Build – Adding Pages with jQuery Mobile")
        [Create Your First Mobile App with PhoneGap Build – Adding Pages
        with jQuery
        Mobile](http://flippinawesome.org/2013/04/15/phonegap-build-step-5/ "Create Your First Mobile App with PhoneGap Build – Adding Pages with jQuery Mobile")
        - 1 year ago

    [View all](http://flippinawesome.org/category/mobile/phonegap/)
-   [Responsive
    Design](http://flippinawesome.org/category/responsive-web-design/)

Functional Reactive Programming in JavaScript
=============================================

-   [Featured](http://flippinawesome.org/category/featured/ "View all posts in Featured")
-   [JavaScript](http://flippinawesome.org/category/web/javascript/ "View all posts in JavaScript")

September 30, 2013

![bacon\_header](http://flippinawesome.org/wp-content/uploads/2013/09/bacon_header.jpg)

*By [Sean Voisen](/authors/sean-voisen)*

If you are a front-end developer – that is, someone who builds user
interfaces for a living – and you haven’t yet explored [Functional
Reactive Programming
(FRP)](http://en.wikipedia.org/wiki/Functional_reactive_programming),
perhaps now is the time to take a look. Never mind the fact that it has
been labeled a [hipster development
trend](http://hipsterdevstack.tumblr.com/post/39558331788/frp-yeah-we-were-doing-that-in-2012)
for 2013, FRP is a time-saving, bug-preventing programming paradigm
worthy of all developers, mustachioed or otherwise.

This post is intended to be a gentle introduction to Functional Reactive
Programming using examples from a specific implementation,
[Bacon.js](https://github.com/baconjs/bacon.js). If you are a seasoned
developer with at least some familiarity with JavaScript, you should
have no problem following along.

What is FRP and Why Bother?
---------------------------

FRP’s primary strengths involve helping you eliminate complexity in two
key areas: dealing with user input, and dealing with asynchronous
operations. If you’ve ever had to deal with the twisted chains of
callback spaghetti that can quickly arise when handling either problem,
then FRP may be for you.

So, what exactly is FRP? You could read the [formal academic
paper](http://conal.net/papers/icfp97/) on the subject, but I’ll attempt
to simplify the matter. Let’s start with Reactive Programming first.
We’ll add the functional part afterwards.

At its most generic, Reactive Programming is simply an alternative way
to think about what is meant by this simple symbol: “=”. As you will
likely remember, in mathematics the equals sign (=) means “equivalent
to.” But in most programming languages, “=” has different semantics. It
means “assign the value on the right of the symbol to the variable on
the left.” (There is a [nice
explanation](http://stackoverflow.com/a/10756617/670428) along the same
lines on Stack Overflow.)

Consider the following JavaScript snippet:

    var x = 1;
    var y = x + 1;
    x = 2;
    console.log(y);

Because of the way “=” works in traditional programming, we expect to
see the number 2 printed in the console. The variable `y` was assigned
the value 1 + 1, which is 2. The third line (`x = 2;`) has no effect on
the output.

But suppose we changed the way that we interpreted “=” such that it
meant what we learned in mathematics, namely the concept of equivalence.
Then the variable `y` would be equivalent to whatever the value of `x`
is at any given time, incremented by 1. In this case we’d expect
different console output – the number 3.

Without data binding or event dispatching – in fact, without any special
work on our part – what we have now is a new kind of super variable `y`,
one that represents a time-based relationship, and will continually
change as `x` changes over time. This is the kind of programming power
that Reactive Programming provides.

*Functional* Reactive Programming is simply reactive programming using
functional programming style and concepts for a [side-effect
free](http://en.wikipedia.org/wiki/Side_effect_(computer_science))implementation.
The functional style allows us to better understand and reason about our
reactive code.

Diving in With Bacon.js
-----------------------

Perhaps the best way to get a better understanding is just to dive in
and write some code. Let’s build a very simple Wikipedia search tool.

Download [Bacon.js](https://github.com/baconjs/bacon.js) and set up a
simple page using Bacon and jQuery. Add an input field and search
button:

    <input type="text" id="searchInput" />
    <button id="searchButton">Search</button>

And for the JavaScript:

    function setup()
    {
      var buttonStream = $("#searchButton").asEventStream("click");
      buttonStream.onValue(function(e) {
        console.log("Hello from Bacon.js");
      });
    }

    $(document).ready(setup);

Nothing terribly exciting here; clicking the button should print to the
browser console. But it does expose us to the first and most important
building block of FRP: the Event Stream.

### Event Streams

An event stream is a representation of a time-based series of discrete
events. Think of it as a channel that you may subscribe to in order to
be notified about some kind of happening in your program. Events in the
stream may happen at any time and need not occur in a regular
synchronous fashion (i.e. like the ticking of a clock).

[![event\_stream\_1](http://flippinawesome.org/wp-content/uploads/2013/09/event_stream_1.jpg)](http://flippinawesome.org/wp-content/uploads/2013/09/event_stream_1.jpg)

Unlike traditional events (like those provided by the browser or
jQuery), the power of event streams is that they may be merged,
filtered, or mapped (transformed) in any number of ways before you
handle and act on the events conveyed within.

[![stream\_merging](http://flippinawesome.org/wp-content/uploads/2013/09/stream_merging.jpg)](http://flippinawesome.org/wp-content/uploads/2013/09/stream_merging.jpg)

A concrete example may help illustrate the point. Suppose we would like
to initiate a search from our form by either clicking the search button
or simply pressing the enter key while in the search input field. The
standard way of doing so in jQuery requires creating separate event
handlers for each input event, performing necessary logic to extract the
search input, then calling a separate function to initiate a search.

    function setup()
    {
      $("#searchButton").click(function() {
        doSearch($("#searchInput").val());
      }

      $("#searchInput").keyUp(function(e) {
        if (e.keyCode == 13) {
          doSearch($("#searchInput").val());
        }
      }
    }

In the above example, refactoring is already cumbersome because we have
two callbacks that can initiate a search. If we changed the search
function’s name or argument signature, then even with this simple
example we’d already have to change our code in two places. And we
haven’t even written any logic to handle the search results yet. If
`doSearch` performs a search via Ajax, it too will need a callback to
return results or errors.

With FRP we can work more declaratively and, in turn, design the program
such that the logic is easier to follow.

Here’s how it would work with Bacon.js:

    function setup()
    {
      var buttonStream = $("#searchButton").asEventStream("click");
      var enterStream = $("#searchInput").asEventStream("keyup")
        .filter(function(e) {
          return e.keyCode == 13;
        }
      );

      var searchStream = Bacon.mergeAll(buttonStream, enterStream)
        .map(function(){return $("#searchInput").val()})
        .flatMapLatest(doSearch);
    }

Here, we create two streams, one for the button clicks and one for key
up events in the input field. We filter the key up events such that the
stream only emits events when the key up happens to be the enter key.
Next we merge the two streams and apply a map (transformation) so that
our new `searchStream` emits events that contain the value of the search
input field. Finally, we do another map that will take the results from
our Ajax search function and only emit events when the asynchronous Ajax
call is complete. Let’s take a look at that search function:

    function doSearch(query)
    {
        var url = 'http://en.wikipedia.org/w/api.php?action=opensearch'
          + '&format=json' 
          + '&search=' + encodeURI(query);
        return Bacon.fromPromise($.ajax({url:url, dataType:"jsonp"}));
    }

This simple Wikipedia search returns an event stream built on the jQuery
promise object returned by the `ajax` function. This stream will only
emit a single event when the promise is complete, either the search
results or an error.

At this point, all of our application logic is essentially composed of
combining, filtering and mapping the flow of event stream. Button clicks
and key presses are converted into streams that are then merged into a
single stream that is then mapped into another stream that is then
transformed into a final stream, `searchStream`, that only emits events
when a search is complete. One linear flow. No callback spaghetti.

You may be wondering about the function `flatMapLatest`. It takes a
stream and returns a new stream that contains only events from the last
spawned stream, in our case the stream created by `Bacon.fromPromise` in
the `doSearch` function. To get the results of our search, we simply use
onValue on our search stream:

    searchStream.onValue(function(results) {
      console.log(results);
    }

### Properties

The magic of FRP and Bacon.js does not end with event streams. Remember
those “super variables” I promised that would magically change over time
in response to events. In Bacon.js those are called “properties.”

You create properties from event streams using either the `scan`
function or the `toProperty` function. A property will always have a
value (though not necessarily initially), and that value may change over
time depending on what happens with its related event stream.

As a simple example, let’s create a property that keeps track of the
number of searches we perform with our new Bacon-powered search field.

    var totalSearches = searchStream.scan(0, function(value) { 
      return ++value; 
    })

Here, we use the `scan` function to create a property that increases by
1 every time the `searchStream` emits an event. If you’re not familiar
with `scan` from other functional programming experience, think of it as
a kind of accumulator function that takes an initial value, and then for
each event in the stream calls some function that takes the value as an
argument. In our case, we start with 0 in the accumulator, then
increment it by 1. The `totalSearches` property will always contain
whatever is in the accumulator.

Like event streams, we can use `onValue` to get the value in our
property:

    totalSearches.onValue(function(value) {
      console.log(value);
    }

Notice what we did not do that we would have to do using standard jQuery
and imperative programming: we did not create a global variable that
would have to store our total search count. We did not have to remember
to increment that variable in our `doSearch` callback. And, most
importantly, if we wanted to display that variable on the page, we would
not have to manually check when it updated and then display it – we can
use the `onValue` function instead to be updated of any changes.

We could also use `toProperty` to create another property that contains
the number of search results returned by Wikipedia.

    var totalResults = searchStream.map(function(value){return value[1].length;}).toProperty();

Finally, it turns out that **we also need properties in order to fix a
small bug in our example.**
^[1](http://sean.voisen.org/blog/2013/09/intro-to-functional-reactive-programming/#1)^
Because Bacon.js uses lazy evaluation, there’s no guarantee that the
value of the searchInput we return as part of our mapping in the
searchStream will be what we expect at the time we expect it. If we were
to use our searchStream with buffering combinators in the Bacon.js
library like zipWith or when, then we might run into trouble. We can fix
this by creating a property that updates whenever our input changes on
key down, and then use Bacon’s sampledBy function to ensure our stream
passes along the value of the property at the time it was sampled
instead:

    var queryProperty = $("#searchInput").asEventStream("keydown")
        .map('.target.value').toProperty();

Here’s the final program in its entirety:

    function setup()
    {
      var queryProperty = $("#searchInput").asEventStream("keydown")
        .map('.target.value').toProperty();
      var buttonStream = $("#searchButton").asEventStream("click");
      var enterStream = $("#searchInput").asEventStream("keyup")
        .filter(function(e){
          return e.keyCode == 13;
        }
      );

      var searchStream = queryProperty
        .sampledBy(Bacon.mergeAll(buttonStream, enterStream))
        .flatMapLatest(doSearch);

      var totalSearches = searchStream.scan(0, function(value) { 
        return ++value; 
      });

      totalSearches.onValue(function(total) {
        console.log("Total searches: " + total);
      });

      var totalResults = searchStream.map(function(value){return value[1].length;}).toProperty();

      totalResults.onValue(function(total) {
        console.log("Search result count: " + total);
      });
    }

    function doSearch(query)
    {
      var url = 'http://en.wikipedia.org/w/api.php?action=opensearch'
          + '&format=json' 
          + '&search=' + encodeURI(query);
      return Bacon.fromPromise($.ajax({url:url, dataType:"jsonp"}));
    }

    $(document).ready(setup);

### Conclusion

This short post really only scratches the surface of what is available
in FRP libraries like [Bacon.js](https://github.com/baconjs/bacon.js). I
suggest you take the time to explore and see more of what FRP offers
before deciding if it’s right for you. Indeed, Bacon.js is not the only
FRP library available for JavaScript developers:
[RxJS](https://github.com/Reactive-Extensions/RxJS) is the original and
popular alternative. But whatever you choose, I think you’ll find FRP is
a handy tool – even in imperative languages – for writing cleaner,
simpler, more elegant code.

> [1] Bug fix courtesy of [@ali\_pang](https://twitter.com/ali_pang)

*This article was originally published at
[http://sean.voisen.org/blog/2013/09/intro-to-functional-reactive-programming/](http://sean.voisen.org/blog/2013/09/intro-to-functional-reactive-programming/)*

Sharing

-   **[Twitter](https://twitter.com/intent/tweet?url=http%3A%2F%2Fflippinawesome.org%2F2013%2F09%2F30%2Ffunctional-reactive-programming-in-javascript%2F&text=Functional%20Reactive%20Programming%20in%20JavaScript)10
-   **[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fflippinawesome.org%2F2013%2F09%2F30%2Ffunctional-reactive-programming-in-javascript%2F&t=Functional%20Reactive%20Programming%20in%20JavaScript)0
-   **[Google
    +](https://plus.google.com/share?url=http%3A%2F%2Fflippinawesome.org%2F2013%2F09%2F30%2Ffunctional-reactive-programming-in-javascript%2F)0
-   **[Linkedin](http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fflippinawesome.org%2F2013%2F09%2F30%2Ffunctional-reactive-programming-in-javascript%2F&title=Functional%20Reactive%20Programming%20in%20JavaScript&summary=By%20Sean%20Voisen%20If%20you%20are%20a%20front-end%20developer%20%E2%80%93%20that%20is%2C%20someone%20who%20builds%20user%20interfaces%20for%20a%20living%20%E2%80%93%20and%20you%20haven%26%238217%3Bt%20yet%20explored%C2%A0Functional%20Reactive%20Programming%20%28FRP%29%2C%20perhaps%20now%20is%20the%20time%20to%20take%20a%20look.%20Never%20mind%20the%20fact%20that%20it%20has%20been%20labeled%20a%C2%A0hipster%20development%20trend%C2%A0for%202013%2C%20FRP%20is%20a%20time-saving%2C%20%5B%26hellip%3B%5D)0
-   **[Email this
    article](mailto:?Subject=Functional%20Reactive%20Programming%20in%20JavaScript)
-   **[Print this article](javascript:window.print();)

### 5 Comments

1.  ![image](http://0.gravatar.com/avatar/a6b14879b519addbd12e7805938e99a5?s=44&d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&r=G)[Edwin
    Martin](http://www.bitstorm.org) [4 hours
    ago](http://flippinawesome.org/2013/09/30/functional-reactive-programming-in-javascript/#comment-3946)
    said:

    There’s a little error in the text, probably a cut-n-paste error.
    Below the heading properties, there’s a block of code that is the
    same as the next block of code. Below the first block, you refer to
    the scan function, but that’s not used in the code block. In the
    full code listing, the right code can be found, but for many,
    probably not after some confusion
    ![;-)](http://flippinawesome.org/wp-includes/images/smilies/icon_wink.gif)

    [Reply](/2013/09/30/functional-reactive-programming-in-javascript/?replytocom=3946#respond)
    **

    -   ![image](http://1.gravatar.com/avatar/b1e63769b74cd20b83b121c69ee3da6c?s=44&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&r=G)remotesynth
        [4 hours
        ago](http://flippinawesome.org/2013/09/30/functional-reactive-programming-in-javascript/#comment-3947)
        said:

        Thanks for catching that. Fixed.

        [Reply](/2013/09/30/functional-reactive-programming-in-javascript/?replytocom=3947#respond)
        **

2.  ![image](http://1.gravatar.com/avatar/b6c23db596a829bc97ed0dfa68a6fb67?s=44&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&r=G)[Mike
    Wilcox](http://clubajax.org) [5 hours
    ago](http://flippinawesome.org/2013/09/30/functional-reactive-programming-in-javascript/#comment-4067)
    said:

    This is one of the easier-to-digest summaries of FRP that I’ve read.
    Good job!

    [Reply](/2013/09/30/functional-reactive-programming-in-javascript/?replytocom=4067#respond)
    **

3.  ![image](http://1.gravatar.com/avatar/d4f1436b1378397f25eb8c2646669b8f?s=44&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&r=G)[Che](http://chenx.co.za)
    [7 hours
    ago](http://flippinawesome.org/2013/09/30/functional-reactive-programming-in-javascript/#comment-4139)
    said:

    Pretty interesting! I’m pretty into Meteor.js which has a lot of
    reactive elements. Going to read up on FRP some more.

    [Reply](/2013/09/30/functional-reactive-programming-in-javascript/?replytocom=4139#respond)
    **

4.  ![image](http://0.gravatar.com/avatar/c68e714465a5e1483b86fc6b81f48bc1?s=44&d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&r=G)[Nathan](http://n/a)
    [17 hours
    ago](http://flippinawesome.org/2013/09/30/functional-reactive-programming-in-javascript/#comment-4155)
    said:

    “If we changed the search function’s name or argument signature,
    then even with this simple example we’d already have to change our
    code in two places.”

    Well no, because we wouldn’t necessarily call the search function
    from both handlers: instead of implementing “the enter key does a
    search”, we can implement “the enter key does whatever the main
    button does” – or at least that’s one way to look at it. So instead
    of calling the search function in the keyup handler we could say
    $(“\#searchButton”).click(); to call the other handler.

    Obviously that still leaves us with a dependency between the two
    handlers (though it’s an easier to maintain dependency than calling
    the search function in both places), so the rewrite with bacon.js
    still makes sense.

    [Reply](/2013/09/30/functional-reactive-programming-in-javascript/?replytocom=4155#respond)
    **

### [Cancel reply](/2013/09/30/functional-reactive-programming-in-javascript/#respond)

**Your Name \*

**Your Email \*

**Website \*

### Web & Mobile Development News

[Web Standards Library Update – Week of March 31, 2014](http://flippinawesome.org/2014/04/10/web-standards-library-update-week-of-march-31-2014/ "Web Standards Library Update – Week of March 31, 2014")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[Best of JavaScript, HTML & CSS – Week of March 31, 2014](http://flippinawesome.org/2014/04/09/best-of-javascript-html-css-march-31-2014/ "Best of JavaScript, HTML & CSS – Week of March 31, 2014")
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[Web Standards Library Update – Week of March 24, 2014](http://flippinawesome.org/2014/04/03/web-standards-library-update-week-of-march-24-2014/ "Web Standards Library Update – Week of March 24, 2014")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[Best of JavaScript, HTML & CSS – Week of March 24, 2014](http://flippinawesome.org/2014/04/02/best-of-javascript-html-css-week-of-march-24-2014/ "Best of JavaScript, HTML & CSS – Week of March 24, 2014")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[Web Standards Library Update – Week of March 17, 2014](http://flippinawesome.org/2014/03/26/web-standards-library-update-week-of-march-17-2014/ "Web Standards Library Update – Week of March 17, 2014")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

### Categories

-   [Best
    of](http://flippinawesome.org/category/news/best-of/ "View all posts filed under Best of")
-   [CSS](http://flippinawesome.org/category/web/css/ "View all posts filed under CSS")
-   [Design](http://flippinawesome.org/category/web/design/ "View all posts filed under Design")
-   [Featured](http://flippinawesome.org/category/featured/ "View all posts filed under Featured")
-   [Firefox
    OS](http://flippinawesome.org/category/mobile/firefox-os/ "View all posts filed under Firefox OS")
-   [Game
    Development](http://flippinawesome.org/category/web/game-development/ "View all posts filed under Game Development")
-   [HTML](http://flippinawesome.org/category/web/html/ "View all posts filed under HTML")
-   [JavaScript](http://flippinawesome.org/category/web/javascript/ "View all posts filed under JavaScript")
-   [Mobile](http://flippinawesome.org/category/mobile/ "View all posts filed under Mobile")
-   [News](http://flippinawesome.org/category/news/ "View all posts filed under News")
-   [NodeJS](http://flippinawesome.org/category/web/nodejs/ "View all posts filed under NodeJS")
-   [Opinion](http://flippinawesome.org/category/opinion/ "View all posts filed under Opinion")
-   [PhoneGap](http://flippinawesome.org/category/mobile/phonegap/ "View all posts filed under PhoneGap")
-   [Responsive Web
    Design](http://flippinawesome.org/category/responsive-web-design/ "View all posts filed under Responsive Web Design")
-   [Tools](http://flippinawesome.org/category/web/tools/ "View all posts filed under Tools")
-   [Web](http://flippinawesome.org/category/web/ "View all posts filed under Web")
-   [Wordpress](http://flippinawesome.org/category/web/wordpress/ "View all posts filed under Wordpress")

### Archives

-   [April 2014](http://flippinawesome.org/2014/04/)
-   [March 2014](http://flippinawesome.org/2014/03/)
-   [February 2014](http://flippinawesome.org/2014/02/)
-   [January 2014](http://flippinawesome.org/2014/01/)
-   [December 2013](http://flippinawesome.org/2013/12/)
-   [November 2013](http://flippinawesome.org/2013/11/)
-   [October 2013](http://flippinawesome.org/2013/10/)
-   [September 2013](http://flippinawesome.org/2013/09/)
-   [August 2013](http://flippinawesome.org/2013/08/)
-   [July 2013](http://flippinawesome.org/2013/07/)
-   [June 2013](http://flippinawesome.org/2013/06/)
-   [May 2013](http://flippinawesome.org/2013/05/)
-   [April 2013](http://flippinawesome.org/2013/04/)
-   [March 2013](http://flippinawesome.org/2013/03/)

-   [Flippin' Awesome](http://flippinawesome.org)
-   [Featured](http://flippinawesome.org/category/featured/)
-   Functional Reactive Programming in JavaScript

Copyright © 2012.

All content is licensed under the [Creative Commons
Attribution-Noncommercial-Share Alike 3.0 Unported
License](http://creativecommons.org/licenses/by-nc-sa/3.0/).

[Flippin' Awesome](http://flippinawesome.org/ "Flippin' Awesome")

[Top](#masthead "Scroll to top")

This markdown document has been converted from the html document located at:
http://flippinawesome.org/2013/09/30/functional-reactive-programming-in-javascript/
