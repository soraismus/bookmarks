[unscriptable.com](http://unscriptable.com/)
============================================

Nothing is impossible. Even on the web.

![image](/wp-content/uploads/2009/04/d_in_grass.png)

-   [Home](http://unscriptable.com/ "Home")
-   [about](http://unscriptable.com/about/)
-   [contact / résumé](http://unscriptable.com/contact/)
-   [license](http://unscriptable.com/license/)
-   [](javascript:void(0);)

Switcher

[Home](http://unscriptable.com/ "Goto homepage") \>
[dojo](http://unscriptable.com/category/javascript/dojo/ "View all posts in dojo"),
[Event
Handling](http://unscriptable.com/category/events/ "View all posts in Event Handling"),
[Javascript](http://unscriptable.com/category/javascript/ "View all posts in Javascript")
\> Debouncing Javascript Methods

Debouncing Javascript Methods
-----------------------------

March 20th, 2009

Back in 2006, I was the lead front-end architect for a mission-critical
Web 2.0 application. Yah-yah, aren’t they all mission-critical? Yes, but
this one really was critical since it was one of those make-or-break
moments for the product. What made this project really interesting were
the unrealistic expectations the product managers had of web apps.

Sometimes, pressure like this can lead to creativity and innovation. On
this occasion, it helped me reach back in to my electrical engineering
coursework to apply a hardware concept to software programming.\
 \
 Just imagine this:

1.  You are tasked to write the entire Javascript-based framework from
    scratch, including the core functions (inheritance, declarations,
    event connections), DOM manipulation and querying, a widget
    framework, MVC, drag-and-drop, and dozens of custom widgets to boot.
2.  You are given unintuitive and un-web-like requirements to ensure
    that the app allowed customers to adhere to strict FDA regulations.
3.  The product managers had no experience with web app development so
    they designed the requirements for a Windows application. You know:
    modal dialogs, instant retrieval of large amounts of data (as if it
    were coming straight from the disk), workflows that depended on
    sequenced calls to/from the back-end systems, etc.

Oh, and did I mention there was a deadline and only two of us were hired
to code the entire UI side of the project?

Well, I am always up for a challenge, especially if somebody says, “It
can’t be done”. So needless to say, I had to really use my brain on this
project.

One of the more interesting requirements was to show the user a summary
side-bar of information pertaining to the current field (i.e. the input
element that had focus). This side-bar information could be from several
kilobytes to more than 100 kB. The data had to be fetched via XHR from
the back-end and displayed each time the user entered a new field.

This presented a major problem if the user was keyboard-oriented and
preferred to use the Tab key to move from field to field. There could be
hundreds of fields on the screen, and a user could simply lean on the
Tab key to navigate from one end of the form to the other. If the user
were lucky enough to be on a fast network connection and had a fast
enough browser, this would go fairly smoothly. However, the server would
get absolutely hammered by all of the XHR requests necessary to populate
the side-bar!

Luckily, I had handled this situation several times before. A simple
setTimeout and a few state variables fixes this problem fairly easily.
But there were several of these situations in this project, and I wanted
to build something reusable.

The more I thought about it, the more it felt like [contact
debouncing](http://en.wikipedia.org/wiki/Switch#Contact_bounce).
Debouncing means to coalesce several temporally close signals into one
signal. For example, your computer keyboard does this. Every time you
hit a key, the contacts actually bounce a few times, causing several
signals to be sent to the circuitry. The circuitry determines that the
bouncing has ended when no bounces are detected within a certain period
(the “detection period”). Since people can’t really type faster than
roughly 10 keys per second, any signals happening within 100 msec of
each other, for example, are likely part of the same key press. (In
practice, you should at least halve this, so about 50 msec for our
keyboard example. I have no idea what keyboards really use, by the way.
This is just an illustration.)

Debouncing != Throttling
------------------------

Whenever I bring up the concept of debouncing, developers try to cast it
as just a means of throttling. But that’s not true at all. Throttling is
the reduction in rate of a repeating event. Throttling is good for
reducing mousemove events to a lesser, manageable rate, for instance.

Debouncing is quite more precise. Debouncing ensures that exactly one
signal is sent for an event that may be happening several times — or
even several hundreds of times over an extended period. As long as the
events are occurring fast enough to happen at least once in every
detection period, the signal will not be sent!

Let’s relate this back to our keyboard-oriented user and our huge set of
form fields. Throttling here would certainly help. We could reduce the
number of XHR requests to a lower rate than the computer’s key repeat
rate for sure! However, we’d still be fetching from the back-end more
times than necessary, and the occasional re-rendering of the fetched
data could temporarily freeze up the browser, deteriorating the user
experience.

Debouncing on the other hand could better detect when the user stopped
leaning on the keyboard and had arrived at their destination. It’s
certainly not perfect. The user still may overshoot their destination,
hesitate, and back-track, causing enough delay for the debounce
detection period to expire. However, our tests showed that debouncing
did a much better job of reducing XHR requests than throttling.

Implementation
--------------

The original debounce method was rather large and clunky. I consider it
a prototype. A proof of concept. I ended up needing debouncing a few
times since that project and rewrote it each time, trying to improve it.
I’ve finally devised something that feels good enough to share.

The latest rendition takes two parameters: the detection period
(“threshold”) and a Boolean indicating whether the signal should happen
at the beginning of the detection period (true) or the end (“execAsap”).

Here it is:

~~~~ {.javascript style="font-family:monospace;"}
Function.prototype.debounce = function (threshold, execAsap) {
    var func = this, // reference to original function
        timeout; // handle to setTimeout async task (detection period)
    // return the new debounced function which executes the original function only once
    // until the detection period expires
    return function debounced () {
        var obj = this, // reference to original context object
            args = arguments; // arguments at execution time
        // this is the detection function. it will be executed if/when the threshold expires
        function delayed () {
            // if we're executing at the end of the detection period
            if (!execAsap)
                func.apply(obj, args); // execute now
            // clear timeout handle
            timeout = null; 
        };
        // stop any current detection period
        if (timeout)
            clearTimeout(timeout);
        // otherwise, if we're not already waiting and we're executing at the beginning of the detection period
        else if (execAsap)
            func.apply(obj, args); // execute now
        // reset the detection period
        timeout = setTimeout(delayed, threshold || 100); 
    };
}
~~~~

It works by issuing a setTimeout at the specified detection period. Each
time the function is called, the setTimeout is canceled and issued
again. This serves as our detection mechanism, but using reverse logic.
If/when the setTimeout executes, we know that our function was not
called within the detection period.

Wow. It looks rather large with all of those comments. Here is a version
without the comments:

~~~~ {.javascript style="font-family:monospace;"}
Function.prototype.debounce = function (threshold, execAsap) {
 
    var func = this, timeout;
 
    return function debounced () {
        var obj = this, args = arguments;
        function delayed () {
            if (!execAsap)
                func.apply(obj, args);
            timeout = null; 
        };
 
        if (timeout)
            clearTimeout(timeout);
        else if (execAsap)
            func.apply(obj, args);
 
        timeout = setTimeout(delayed, threshold || 100); 
    };
 
}
~~~~

If you prefer not to augment the native objects, here’s a stand-alone
version:

~~~~ {.javascript style="font-family:monospace;"}
var debounce = function (func, threshold, execAsap) {
 
    var timeout;
 
    return function debounced () {
        var obj = this, args = arguments;
        function delayed () {
            if (!execAsap)
                func.apply(obj, args);
            timeout = null; 
        };
 
        if (timeout)
            clearTimeout(timeout);
        else if (execAsap)
            func.apply(obj, args);
 
        timeout = setTimeout(delayed, threshold || 100); 
    };
 
}
~~~~

Example uses:

~~~~ {.javascript style="font-family:monospace;"}
// using debounce in a constructor or initialization function to debounce 
// focus events for a widget (onFocus is the original handler):
    this.debouncedOnFocus = this.onFocus.debounce(500, false);
    this.inputNode.addEventListener('focus', this.debouncedOnFocus, false);
 
 
// to coordinate the debounce of a method for all objects of a certain class, do this:
MyClass.prototype.someMethod = function () {
    /* do something here, but only once */
}.debounce(100, true); // execute at start and use a 100 msec detection period
 
 
// the dojo way to coordinate the debounce of a method for all objects of a certain class
// (using the stand-alone version)
dojo.declare('MyClass', null, {
 
    // other members go here
 
    someMethod: debounce(function () {
        /* do something here, but only once */
    }, 100, true); // execute at start and use a 100 msec detection period
 
});
 
 
// wait until the user is done moving the mouse, then execute
// (using the stand-alone version)
document.onmousemove = debounce(function (e) {
    /* do something here, but only once after mouse cursor stops */
}, 250, false);
~~~~

**Let me know if you find this useful in *your* projects!**

P.S. The mission-critical project was a success!

[Be Sociable, Share!](http://blogplay.com)

-   [](http://twitter.com/intent/tweet?text=Debouncing%20Javascript%20Methods%20-%20http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F%20(via%20@sociablesite) "Twitter")
-   [](http://www.facebook.com/share.php?u=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&t=Debouncing%20Javascript%20Methods "Facebook")
-   [](https://mail.google.com/mail/?view=cm&fs=1&to&su=Debouncing%20Javascript%20Methods&body=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&ui=2&tf=1&shva=1 "email")
-   -   [](http://www.stumbleupon.com/submit?url=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&title=Debouncing%20Javascript%20Methods "StumbleUpon")
-   [](http://delicious.com/post?url=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&title=Debouncing%20Javascript%20Methods&notes=...%20a%20user%20could%20simply%20lean%20on%20the%20Tab%20key%20to%20navigate%20from%20one%20end%20of%20the%20form%20to%20the%20other.%20%20If%20the%20user%20were%20lucky%20enough%20to%20be%20on%20a%20fast%20network%20connection%20and%20had%20a%20fast%20enough%20browser%2C%20this%20would%20go%20fairly%20smoothly.%20%20However%2C%20the%20server%20would%20get%20absolutely%20hammered%20by%20all%20of%20the%20XHR%20requests%20necessary%20to%20populate%20the%20side-bar%21%20%20 "Delicious")
-   [](http://www.google.com/reader/link?url=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&title=Debouncing%20Javascript%20Methods&srcURL=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&srcTitle=unscriptable.com+Nothing+is+impossible.+Even+on+the+web. "Google Reader")
-   [](http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&title=Debouncing%20Javascript%20Methods&source=unscriptable.com+Nothing+is+impossible.+Even+on+the+web.&summary=...%20a%20user%20could%20simply%20lean%20on%20the%20Tab%20key%20to%20navigate%20from%20one%20end%20of%20the%20form%20to%20the%20other.%20%20If%20the%20user%20were%20lucky%20enough%20to%20be%20on%20a%20fast%20network%20connection%20and%20had%20a%20fast%20enough%20browser%2C%20this%20would%20go%20fairly%20smoothly.%20%20However%2C%20the%20server%20would%20get%20absolutely%20hammered%20by%20all%20of%20the%20XHR%20requests%20necessary%20to%20populate%20the%20side-bar%21%20%20 "LinkedIn")
-   [](http://www.blinklist.com/index.php?Action=Blink/addblink.php&Url=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&Title=Debouncing%20Javascript%20Methods "BlinkList")
-   ![image](http://unscriptable.com/wp-content/plugins/sociable/images/more.png)

-   [](http://www.myspace.com/Modules/PostTo/Pages/?u=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&t=Debouncing%20Javascript%20Methods "Myspace")
-   [](http://digg.com/submit?phase=2&url=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&title=Debouncing%20Javascript%20Methods&bodytext=...%20a%20user%20could%20simply%20lean%20on%20the%20Tab%20key%20to%20navigate%20from%20one%20end%20of%20the%20form%20to%20the%20other.%20%20If%20the%20user%20were%20lucky%20enough%20to%20be%20on%20a%20fast%20network%20connection%20and%20had%20a%20fast%20enough%20browser%2C%20this%20would%20go%20fairly%20smoothly.%20%20However%2C%20the%20server%20would%20get%20absolutely%20hammered%20by%20all%20of%20the%20XHR%20requests%20necessary%20to%20populate%20the%20side-bar%21%20%20 "Digg")
-   [](http://reddit.com/submit?url=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&title=Debouncing%20Javascript%20Methods "Reddit")
-   [](http://www.google.com/bookmarks/mark?op=edit&bkmk=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&title=Debouncing%20Javascript%20Methods&annotation=...%20a%20user%20could%20simply%20lean%20on%20the%20Tab%20key%20to%20navigate%20from%20one%20end%20of%20the%20form%20to%20the%20other.%20%20If%20the%20user%20were%20lucky%20enough%20to%20be%20on%20a%20fast%20network%20connection%20and%20had%20a%20fast%20enough%20browser%2C%20this%20would%20go%20fairly%20smoothly.%20%20However%2C%20the%20server%20would%20get%20absolutely%20hammered%20by%20all%20of%20the%20XHR%20requests%20necessary%20to%20populate%20the%20side-bar%21%20%20 "Google Bookmarks")
-   [](http://news.ycombinator.com/submitlink?u=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&t=Debouncing%20Javascript%20Methods "HackerNews")
-   [](http://reporter.es.msn.com/?fn=contribute&Title=Debouncing%20Javascript%20Methods&URL=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&cat_id=6&tag_id=31&Remark=...%20a%20user%20could%20simply%20lean%20on%20the%20Tab%20key%20to%20navigate%20from%20one%20end%20of%20the%20form%20to%20the%20other.%20%20If%20the%20user%20were%20lucky%20enough%20to%20be%20on%20a%20fast%20network%20connection%20and%20had%20a%20fast%20enough%20browser%2C%20this%20would%20go%20fairly%20smoothly.%20%20However%2C%20the%20server%20would%20get%20absolutely%20hammered%20by%20all%20of%20the%20XHR%20requests%20necessary%20to%20populate%20the%20side-bar%21%20%20 "MSNReporter")
-   [](http://sphinn.com/index.php?c=post&m=submit&link=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F "Sphinn")
-   [](http://posterous.com/share?linkto=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&title=Debouncing%20Javascript%20Methods&selection=...%20a%20user%20could%20simply%20lean%20on%20the%20Tab%20key%20to%20navigate%20from%20one%20end%20of%20the%20form%20to%20the%20other.%20%20If%20the%20user%20were%20lucky%20enough%20to%20be%20on%20a%20fast%20network%20connection%20and%20had%20a%20fast%20enough%20browser%2C%20this%20would%20go%20fairly%20smoothly.%20%20However%2C%20the%20server%20would%20get%20absolutely%20hammered%20by%20all%20of%20the%20XHR%20requests%20necessary%20to%20populate%20the%20side-bar%21%20%20 "Posterous")
-   [](http://www.tumblr.com/share?v=3&u=http%3A%2F%2Funscriptable.com%2F2009%2F03%2F20%2Fdebouncing-javascript-methods%2F&t=Debouncing%20Javascript%20Methods&s=...%20a%20user%20could%20simply%20lean%20on%20the%20Tab%20key%20to%20navigate%20from%20one%20end%20of%20the%20form%20to%20the%20other.%20%20If%20the%20user%20were%20lucky%20enough%20to%20be%20on%20a%20fast%20network%20connection%20and%20had%20a%20fast%20enough%20browser%2C%20this%20would%20go%20fairly%20smoothly.%20%20However%2C%20the%20server%20would%20get%20absolutely%20hammered%20by%20all%20of%20the%20XHR%20requests%20necessary%20to%20populate%20the%20side-bar%21%20%20 "Tumblr")

![image](http://unscriptable.com/wp-content/plugins/sociable/images/closelabel.png "close")

-   [Tweet](https://twitter.com/share)
-   -   -   -   

[dojo](http://unscriptable.com/category/javascript/dojo/ "View all posts in dojo"),
[Event
Handling](http://unscriptable.com/category/events/ "View all posts in Event Handling"),
[Javascript](http://unscriptable.com/category/javascript/ "View all posts in Javascript")

[Comments (17)](javascript:void(0);) [Trackbacks
(15)](javascript:void(0);)

![image](http://0.gravatar.com/avatar/c7cf6cb00c652a5d18917ba8d736fde8?s=32&d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[Joe McCann](http://www.subprint.com)

March 23rd, 2009 at 13:33 | [\#1](#comment-10)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Impressive article. Reminds a bit of how the hoverIntent plugin for
jQuery works.

![image](http://1.gravatar.com/avatar/f3018d14b9c3d18e7c10ce34215b0f6c?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[Dan G. Switzer, II](http://blog.pengoworks.com/)

March 23rd, 2009 at 15:12 | [\#2](#comment-11)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Nice article. I was just about to address this same issue today in some
code I was working on, so this nice re-usable wrapper is highly timely
for me!

![image](http://0.gravatar.com/avatar/cfd87c8fd79d74d253c74458a867d376?s=32&d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[Jason Prado](http://realtangible.com)

March 23rd, 2009 at 21:56 | [\#3](#comment-12)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Very cool! I’ve run into this problem many times and never gotten around
to solving it.

![image](http://1.gravatar.com/avatar/79e785e2a168112fcb9518d0fd9d203c?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[Michael Greenberg](http://www.weaselhat.com/)

March 23rd, 2009 at 22:51 | [\#4](#comment-14)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Your “debounce” is a reinvention of the “calm” operator from
functional-reactive programming (FRP).
[Flapjax](http://www.flapjax-lang.org/) is an existing FRP library (and
language, if you like) for JavaScript that supports this, along with
many other useful functional-reactive operators. (Disclosure: I helped
develop this library.) For example, the mergeE operator takes two
callbacks and combines them:
mergeE($E(‘submit\_top’,'click’),$E(‘submit\_bottom’,'click’)) will
“call back” when an onclick event occurs on either submit\_top or
submit\_bottom. What’s great about Flapjax is that it allows you
manipulate callbacks — and the dataflowing from them — directly.

The [delicious](http://www.flapjax-lang.org/demos/delicious/) example is
a good place to start; there are four versions of increasing complexity.
There’s a [tutorial](http://www.flapjax-lang.org/tutorial/), too, though
it focuses on Flapjax the language, rather than the library.

![image](http://1.gravatar.com/avatar/57ed954c0a9aa2c5bcd66eeca23799df?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

Straps

March 24th, 2009 at 03:53 | [\#5](#comment-16)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Radical and very useful approach, thanks

![image](http://1.gravatar.com/avatar/ffb1002e4f9eee4e75d2f8d672c59e70?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[Ed Hardy](http://modechecker.de/)

March 24th, 2009 at 05:12 | [\#6](#comment-17)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Impressive piece of code. I’ll definitely find this useful some day. I
bookmarked it.

![image](http://0.gravatar.com/avatar/22ca9f33299474000aa6b2559ffcb053?s=32&d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[h3](http://haineault.com)

March 24th, 2009 at 09:55 | [\#7](#comment-18)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

\> In practice, you should at least halve this, so about 50 msec for our
keyboard example. I have no idea what keyboards really use, by the way.
This is just an illustration.

Most keyboards have a bounce time of \~8ms. I found out at my expanse
when I bought a 50$ Microsoft keyboard which have a bounce time of 15ms,
most people will never notice, but I did.

Don’t buy this s\*\*t:
[http://www.microsoft.com/hardware/mouseandkeyboard/ProductDetails.aspx?pid=083&active\_tab=systemRequirements](http://www.microsoft.com/hardware/mouseandkeyboard/ProductDetails.aspx?pid=083&active_tab=systemRequirements)

With this keyboard when I type “Shift + :w + Enter” in Vim to save a
document, the computer actually gets “:W + Enter”, which triggers an
error in Vim. It’s pretty annoying, I guess Microsoft’s keyboard
designer a slow typists.

At first I thought my fingers were becoming lazy, but I realized it was
the s\*\*\*ty Microsoft keyboard when I bought a Razer Lycosa, one of
the best keyboard I ever had for programming.

With its 1ms response time this problem \*never\* occurred once. It also
looks pretty bad ass:
[http://www.razerzone.com/gaming-keyboards/razer-lycosa/razer-lycosa-keyboard](http://www.razerzone.com/gaming-keyboards/razer-lycosa/razer-lycosa-keyboard)

-   ![image](http://0.gravatar.com/avatar/04868e8b9f8a31e4329bd6ca69445395?s=32&d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

    [John Hann](http://unscriptable.com)

    March 24th, 2009 at 13:59 | [\#8](#comment-20)

    [Reply](javascript:void(0);) | [Quote](javascript:void(0);)

    Hey h3,

    Your post is a bit off-topic, but I share your sentiment about
    Microsoft products so I’ll let it through!
    ![:-P](http://unscriptable.com/wp-includes/images/smilies/icon_razz.gif)

    There are some good lessons to learn from your experience that can
    also be applied to Javascript debouncing:

    • Setting the detection period too high could cause missed events.\
     • Setting the detection period too low could cause redundant
    events.\
     • Coordinating multiple debounce routines can be tricky. (In your
    case, the Shift and other keys probably had different debounce
    circuitry.)\
     • The quality of the underlying system is critical to being able to
    lower the detection period to a level that is neither missing events
    nor causing redundant events.

    That last point is key. If you’re debouncing native browser events,
    you don’t really have much choice. However, if you’re debouncing
    your own methods/events, then fast-performing Javascript can make a
    huge difference.

    Thanks for the post!

![image](http://1.gravatar.com/avatar/77a96364936f36301acd41072b08a1eb?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

Naeem Bhatti

March 24th, 2009 at 12:30 | [\#9](#comment-19)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Good stuff.

![image](http://1.gravatar.com/avatar/d9df8dc4cbfb574b6ef4093fef777c58?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

Alejandro

March 26th, 2009 at 19:42 | [\#10](#comment-21)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Just wanted to let you know that this article has made my life much
better. Thanks. Great job

![image](http://1.gravatar.com/avatar/75580627b381d5d0092073948f9530b9?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[mk](http://dogself.com)

March 30th, 2009 at 15:18 | [\#11](#comment-22)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

interesting article. i had to write the same thing once, so it was
interesting to see how you did it. My function was a jquery plugin and
probably not as nice. You may be interested to check it out:\

[http://notetodogself.blogspot.com/2008/12/jquery-responsiveness-plugin-for-fast.html](http://notetodogself.blogspot.com/2008/12/jquery-responsiveness-plugin-for-fast.html)

![image](http://0.gravatar.com/avatar/ca4d892e1f4c5d86af09a0abdbd3f3a4?s=32&d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[Vladimir Dzhuvinov](http://dzhuvinov.com)

June 8th, 2009 at 15:12 | [\#12](#comment-25)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Brilliant, thanks!
![:)](http://unscriptable.com/wp-includes/images/smilies/icon_smile.gif)

![image](http://1.gravatar.com/avatar/5102d2fac2bb8388f2fc54438fdeb306?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

armdros

August 21st, 2009 at 01:23 | [\#13](#comment-27)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Hi, I wanna use this script in IE, but I can\`t get the event keyCode
after debounce. how can i get it?

test code here:

~~~~ {.javascript style="font-family:monospace;"}
var ttt = function(e){
    if(!e && parent.window.event) { e = parent.window.event;}
        alert(e.keyCode); // error !!
 
}.debounce(200,false);
this.inputbox.attachEvent("onkeyup", ttt, false);
~~~~

![image](http://1.gravatar.com/avatar/bac80df744809dfb2be609ee01dce9ba?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[John H](http://unscriptable.com)

August 21st, 2009 at 12:35 | [\#14](#comment-28)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Hey armdros, I think you’ve discovered something … um … interesting.

It appears that IE clobbers\* the event object once the original
function call goes out of scope. It should not do this since we are
holding a reference to the event object! This is obviously a bug in IE.

There is a work-around: just debounce the portion of the handler that
needs to be debounced and process the event in a non-debounced function.

Example:

~~~~ {.javascript style="font-family:monospace;"}
// the debounced part - notice we don't pass the event object
var ttt = function (code) {
    alert(code);
}.debounce(200);
 
// the attached event handler extracts the keycode ad passes it to the debounced function
this.inputbox.attachEvent('onkeypress', function (e) { ttt((e || window.event).keyCode) });
~~~~

I hope that helps!

– John

\* It’s not really clobbered, but I am not sure how else to explain it.
The object exists, but it no longer has any members and raises
exceptions if accessed: “Member not found.”

![image](http://1.gravatar.com/avatar/5102d2fac2bb8388f2fc54438fdeb306?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

armdros

August 28th, 2009 at 03:30 | [\#15](#comment-29)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Hey John, I appreciate you for your help!!\
 I Think You are very clever. Thankyou

![image](http://1.gravatar.com/avatar/bbcf2a5013985bcf1bf95ac34b269646?s=32&d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[Pete](http://otoole.wordpress.com/)

October 9th, 2009 at 15:07 | [\#16](#comment-31)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

Very helpful, thanks!

![image](http://0.gravatar.com/avatar/e249bf5f8f146d33c4596bbdf296f37c?s=32&d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&r=G)

[rolfen](http://weknowtoomuch.com)

April 20th, 2010 at 18:34 | [\#17](#comment-34)

[Reply](javascript:void(0);) | [Quote](javascript:void(0);)

[@h3](#comment-448)\
 That’s not really bounce, but more like threshold. I you press a key
less then 15ms and it doesnt register the keypress then it’s a threshold
problem, or whatever they call it. Bounce refers to multiple contiguous
events reduced to a same event. Your problem is one (or more) event(s)
reduced to zero events
![:)](http://unscriptable.com/wp-includes/images/smilies/icon_smile.gif)\
 IMHO!

1.  March 23rd, 2009 at 08:08 | [\#1](#comment-8)
    [Ajaxian » Debounce your JavaScript
    functions](http://ajaxian.com/archives/debounce-your-javascript-functions)
2.  March 23rd, 2009 at 10:28 | [\#2](#comment-9)
    [Ajax Girl » Blog Archive » Debounce your JavaScript
    functions](http://www.ajaxgirl.com/2009/03/23/debounce-your-javascript-functions/)
3.  March 23rd, 2009 at 22:27 | [\#3](#comment-13)
    [Debounce your JavaScript functions | Guilda
    Blog](http://www.guildfa.net/debounce-your-javascript-functions/)
4.  March 23rd, 2009 at 23:01 | [\#4](#comment-15)
    [Debounce your JavaScript
    functions](http://soft4each.com/blog/debounce-your-javascript-functions.html)
5.  April 23rd, 2009 at 10:49 | [\#5](#comment-23)
    [Css howto » Debounce your JavaScript
    functions](http://www.css-howto.com/css/2009/03/23/2260/debounce-your-javascript-functions.html)
6.  May 5th, 2009 at 15:47 | [\#6](#comment-24)
    [Uxebu.com – JavaScript addicts » Debouncing Javascript
    Methods](http://blog.uxebu.com/2009/05/05/debouncing-javascript-methods/)
7.  August 11th, 2009 at 20:06 | [\#7](#comment-26)
    [Paul Irish » Debounced resize() jQuery event
    handler](http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/)
8.  August 31st, 2009 at 05:11 | [\#8](#comment-30)
    [Twitter Trackbacks for Debouncing Javascript Methods |
    Unscriptable.com [unscriptable.com] on
    Topsy.com](http://topsy.com/tb/bit.ly/ISD8D)
9.  November 29th, 2009 at 09:20 | [\#9](#comment-32)
    [Throttling Interaction with jQuery | elc technologies – Blog : Ruby
    on Rails, iPhone, Flash, Agile, Interactive
    Design](http://web.elctech.com/?p=374)
10. December 2nd, 2009 at 06:26 | [\#10](#comment-33)
    [uberVU – social
    comments](http://www.ubervu.com/conversations/unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/)
11. June 29th, 2011 at 13:17 | [\#11](#comment-35)
    [jQuery Roundup: FitText, gmap3,
    Awesomemarkup](http://www.deadlock.it/programming/javascript/3060-jquery-roundup-fittext-gmap3-awesomemarkup)
12. July 27th, 2011 at 06:58 | [\#12](#comment-36)
    [Handling a series of DOMNodeInserted events as a single event in
    JavaScript – Programmers
    Goodies](http://programmersgoodies.com/handling-a-series-of-domnodeinserted-events-as-a-single-event-in-javascript)
13. August 21st, 2011 at 11:05 | [\#13](#comment-37)
    [Select the first field from jQuery autocomplete function
    automatically – Programmers
    Goodies](http://programmersgoodies.com/select-the-first-field-from-jquery-autocomplete-function-automatically)
14. April 17th, 2012 at 18:01 | [\#14](#comment-179)
    [limit.js – The number of events is too damn high! |
    GotSomething?](http://www.gotsomething.com/2012/04/limit-js-the-number-of-events-is-too-damn-high/)
15. February 26th, 2013 at 05:45 | [\#15](#comment-275)
    [Javascript – Vanilla Masonry Responsive Dynamic Layout « Snippets
    for
    all](http://www.snippetsforall.com/javascript-vanilla-masonry-responsive-dynamic-layout/)

Comments are closed.

[Hi-performance Javascript Tips \#3: Less is More [Updated
2009-04-09]](http://unscriptable.com/2009/04/09/hi-performance-javascript-tips-3-less-is-more/)
[Hi-performance Javascript Tips \#2
«Revisited»](http://unscriptable.com/2009/03/19/hi-performance-javascript-tip-2-revisited/)

[RSS feed](http://unscriptable.com/feed/ "Subscribe to this blog...")

-   [Google](http://fusion.google.com/add?feedurl=http://unscriptable.com/feed/ "Subscribe with Google")
-   [My
    Yahoo!](http://add.my.yahoo.com/rss?url=http://unscriptable.com/feed/ "Subscribe with My Yahoo!")
-   [newsgator](http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://unscriptable.com/feed/ "Subscribe with newsgator")
-   [Bloglines](http://www.bloglines.com/sub/http://unscriptable.com/feed/ "Subscribe with Bloglines")

Search for:

### Recent Posts

-   [Closures for Dummies (or why IIFE !==
    closure)](http://unscriptable.com/2011/10/02/closures-for-dummies-or-why-iife-closure/)
-   [AMD versus CJS. What’s the best
    format?](http://unscriptable.com/2011/09/30/amd-versus-cjs-whats-the-best-format/)
-   [AMD Module Patterns:
    Singleton](http://unscriptable.com/2011/09/22/amd-module-patterns-singleton/)
-   [The first annual
    dojoconf!](http://unscriptable.com/2011/09/22/the-first-annual-dojoconf/)
-   [What is the fastest way to load AMD
    modules?](http://unscriptable.com/2011/09/21/what-is-the-fastest-way-to-load-amd-modules/)

### Recent Comments

-   [Javascript - Vanilla Masonry Responsive Dynamic Layout « Snippets
    for
    all](http://www.snippetsforall.com/javascript-vanilla-masonry-responsive-dynamic-layout/)
    on [Debouncing Javascript
    Methods](http://unscriptable.com/2009/03/20/debouncing-javascript-methods/#comment-275)
-   [limit.js – The number of events is too damn high! |
    GotSomething?](http://www.gotsomething.com/2012/04/limit-js-the-number-of-events-is-too-damn-high/)
    on [Debouncing Javascript
    Methods](http://unscriptable.com/2009/03/20/debouncing-javascript-methods/#comment-179)
-   [OOCSS for JavaScript Pirates | unscriptable.com - EtondeGroup Blog
    of Web Applications | EtondeGroup Blog of Web
    Applications](http://blog.etondegroup.com/2010/11/oocss-for-javascript-pirates-unscriptable-com/)
    on [OOCSS for JavaScript
    Pirates](http://unscriptable.com/2010/11/15/oocss-for-javascript-pirates/#comment-166)
-   [Where does jQuery fit-in with frameworks like JavaScriptMVC,
    BackboneJS, SproutCore and Knockout? | Q&A
    System](http://www.qandasystem.info/programmers/where-does-jquery-fit-in-with-frameworks-like-javascriptmvc-backbonejs-sproutcore-and-knockout/)
    on [Using AMD loaders to write and manage modular
    javascript](http://unscriptable.com/2011/04/27/using-amd-loaders-to-write-and-manage-modular-javascript/#comment-165)
-   [jQuery 1.7 Released | Sean Walther’s
    Blog](http://www.seangw.com/wordpress/index.php/2011/11/jquery-1-7-released/)
    on [curl.js – yet another AMD loader
    [updated]](http://unscriptable.com/2011/03/30/curl-js-yet-another-amd-loader/#comment-142)

### Archives

-   [October 2011](http://unscriptable.com/2011/10/)
-   [September 2011](http://unscriptable.com/2011/09/)
-   [May 2011](http://unscriptable.com/2011/05/)
-   [April 2011](http://unscriptable.com/2011/04/)
-   [March 2011](http://unscriptable.com/2011/03/)
-   [November 2010](http://unscriptable.com/2010/11/)
-   [August 2010](http://unscriptable.com/2010/08/)
-   [June 2010](http://unscriptable.com/2010/06/)
-   [April 2010](http://unscriptable.com/2010/04/)
-   [December 2009](http://unscriptable.com/2009/12/)
-   [May 2009](http://unscriptable.com/2009/05/)
-   [April 2009](http://unscriptable.com/2009/04/)
-   [March 2009](http://unscriptable.com/2009/03/)
-   [April 2007](http://unscriptable.com/2007/04/)

### Categories

-   [AMD](http://unscriptable.com/category/javascript/amd/ "View all posts filed under AMD")
-   [Career
    development](http://unscriptable.com/category/career-development/ "View all posts filed under Career development")
-   [CommonJS](http://unscriptable.com/category/javascript/commonjs/ "View all posts filed under CommonJS")
-   [CSS](http://unscriptable.com/category/css/ "View all posts filed under CSS")
-   [cujo.js](http://unscriptable.com/category/cujo-js/ "View all posts filed under cujo.js")
-   [Design
    patterns](http://unscriptable.com/category/design-patterns/ "View all posts filed under Design patterns")
-   [dijit](http://unscriptable.com/category/javascript/dijit/ "View all posts filed under dijit")
-   [dojo](http://unscriptable.com/category/javascript/dojo/ "View all posts filed under dojo")
-   [Event
    Handling](http://unscriptable.com/category/events/ "View all posts filed under Event Handling")
-   [HTML /
    DHTML](http://unscriptable.com/category/html-dhtml/ "View all posts filed under HTML / DHTML")
-   [i18n](http://unscriptable.com/category/i18n/ "View all posts filed under i18n")
-   [In-browser
    MVC](http://unscriptable.com/category/in-browser-mvc/ "View all posts filed under In-browser MVC")
-   [Inheritance](http://unscriptable.com/category/javascript/inheritance/ "Javascript inheritance")
-   [Java](http://unscriptable.com/category/java/ "View all posts filed under Java")
-   [Javascript](http://unscriptable.com/category/javascript/ "View all posts filed under Javascript")
-   [jQuery](http://unscriptable.com/category/javascript/jquery/ "View all posts filed under jQuery")
-   [l10n](http://unscriptable.com/category/l10n/ "View all posts filed under l10n")
-   [Non-programming](http://unscriptable.com/category/non-programming/ "View all posts filed under Non-programming")
-   [OOCSS](http://unscriptable.com/category/css/oocss/ "View all posts filed under OOCSS")
-   [performance](http://unscriptable.com/category/javascript/performance/ "View all posts filed under performance")
-   [prototype.js](http://unscriptable.com/category/javascript/prototypejs/ "View all posts filed under prototype.js")
-   [Uncategorized](http://unscriptable.com/category/uncategorized/ "View all posts filed under Uncategorized")

### Meta

-   [Log in](http://unscriptable.com/wp-login.php)
-   [Entries
    RSS](http://unscriptable.com/feed/ "Syndicate this site using RSS 2.0")
-   [Comments
    RSS](http://unscriptable.com/comments/feed/ "The latest comments to all posts in RSS")
-   [WordPress.org](http://wordpress.org/ "Powered by WordPress, state-of-the-art semantic personal publishing platform.")

### Categories

-   [Career
    development](http://unscriptable.com/category/career-development/ "View all posts filed under Career development")
-   [CSS](http://unscriptable.com/category/css/ "View all posts filed under CSS")
-   [cujo.js](http://unscriptable.com/category/cujo-js/ "View all posts filed under cujo.js")
-   [Design
    patterns](http://unscriptable.com/category/design-patterns/ "View all posts filed under Design patterns")
-   [Event
    Handling](http://unscriptable.com/category/events/ "View all posts filed under Event Handling")
-   [HTML /
    DHTML](http://unscriptable.com/category/html-dhtml/ "View all posts filed under HTML / DHTML")
-   [i18n](http://unscriptable.com/category/i18n/ "View all posts filed under i18n")
-   [In-browser
    MVC](http://unscriptable.com/category/in-browser-mvc/ "View all posts filed under In-browser MVC")
-   [Java](http://unscriptable.com/category/java/ "View all posts filed under Java")
-   [Javascript](http://unscriptable.com/category/javascript/ "View all posts filed under Javascript")
-   [l10n](http://unscriptable.com/category/l10n/ "View all posts filed under l10n")
-   [Non-programming](http://unscriptable.com/category/non-programming/ "View all posts filed under Non-programming")
-   [Uncategorized](http://unscriptable.com/category/uncategorized/ "View all posts filed under Uncategorized")

### Archives

-   [October 2011](http://unscriptable.com/2011/10/)
-   [September 2011](http://unscriptable.com/2011/09/)
-   [May 2011](http://unscriptable.com/2011/05/)
-   [April 2011](http://unscriptable.com/2011/04/)
-   [March 2011](http://unscriptable.com/2011/03/)
-   [November 2010](http://unscriptable.com/2010/11/)
-   [August 2010](http://unscriptable.com/2010/08/)
-   [June 2010](http://unscriptable.com/2010/06/)
-   [April 2010](http://unscriptable.com/2010/04/)
-   [December 2009](http://unscriptable.com/2009/12/)
-   [May 2009](http://unscriptable.com/2009/05/)
-   [April 2009](http://unscriptable.com/2009/04/)
-   [March 2009](http://unscriptable.com/2009/03/)
-   [April 2007](http://unscriptable.com/2007/04/)

### Meta

-   [Log in](http://unscriptable.com/wp-login.php)

[Top](#) [WordPress](http://wordpress.org/)

Copyright © 2007-2013 unscriptable.com

Theme by [mg12](http://www.neoease.com/). Valid [XHTML
1.1](http://validator.w3.org/check?uri=referer) and [CSS
3](http://jigsaw.w3.org/css-validator/).

This markdown document has been converted from the html document located at:
http://unscriptable.com/2009/03/20/debouncing-javascript-methods/
